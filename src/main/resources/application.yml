youtube:
  api:
    key: ${YOUTUBE_API_KEY:AIzaSyB-VkV46IOlha6K9riel3VSLArnryMl27o}
spotify:
  client:
  id: ${SPOTIFY_CLIENT_ID:3bf4b400e02548dc985801bfc5cf89d4}
  secret: ${SPOTIFY_CLIENT_SECRET:a5b1628552214274927aa643176d0b3e}

  
server:
  address: 0.0.0.0
  port: ${PORT:8080}
  http2:
    enabled: true
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/xml,text/plain
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: never
    include-exception: false

spring:
  application:
    name: anonym-messenger
  
  # Redis Configuration
  data:
    redis:
     # url: redis://:${REDIS_PASSWORD:}@${REDIS_URL:redis.railway.internal}:${REDISPORT:6379}
      host: ${REDISHOST}
      port: ${REDISPORT:6379}
      password: ${REDIS_PASSWORD}
      #REMOVE SSL - Railway internal Redis doesn't use SSL
      ssl:
        enabled: false
      
      # Connection pool settings
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5
          max-wait: 2000ms
      # Timeout settings
      timeout: 5000ms
      connect-timeout: 5000ms

  # Jackson JSON configuration
  jackson:
    serialization:
      write-dates-as-timestamps: false
    time-zone: UTC
    default-property-inclusion: non_null

# Logging configuration
logging:
  level:
    root: INFO
    com.messagingCluster.Messenger: DEBUG
    org.springframework.security: DEBUG
    org.springframework.web.socket: DEBUG
    org.springframework.data.redis: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Spring Actuator for health checks
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
      base-path: /actuator
  endpoint:
    health:
      show-details: always
  health:
    redis:
      enabled: true

# WebSocket Configuration
websocket:
  allowed-origins: "*"
  heartbeat-interval: 25000
  send-timeout: 15000
  send-buffer-size: 524288
  receive-buffer-size: 524288

# Application-specific configuration
anonym:
  session:
    ttl-minutes: 120
    max-ttl-hours: 24
  rate-limit:
    registration:
      max-per-ip: 5
      window-hours: 1
    messaging:
      max-per-minute: 30
      window-seconds: 60
  security:
    max-message-size-bytes: 100000
    allowed-origins:
      - "*"
